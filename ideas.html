<!DOCTYPE html>
<html>
  <head>
    <!-- Load D3 from site -->
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </head>
 
    <!-- CSS (Styling) -->
    <style type="text/css">
      .axis path,
        .axis line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }
        text {
            font-family: Helvetica, sans-serif;
            font-size: 10px;
        }
    </style>
    <!-- End CSS (Styling) -->
 
  <body>
    <h3></h3>
  
  <!-- Begin D3 Javascript -->
  <script type="text/javascript">
  
            // ===== Start Scatterplot =====
            // Setup settings for graphic
            var canvas_width = 1000;
            var canvas_height = 600;
            var padding = 50;  // Padding around canvas, i.e. replaces the 0 of scale

            // Create SVG element
            var svg = d3.select("h3")  // This is where we put our vis
                .append("svg")
                .attr("width", canvas_width+200)
                .attr("height", canvas_height)

            // scatterplot data is an array of arrays
            var data_scatter = [
 {
   "label": "Agile/adaptive approaches",
   "hype": 2.75,
   "current": 2.875,
   "potential": 4.125
 },
 {
   "label": "Business intelligence",
   "hype": 3.08,
   "current": 2.5,
   "potential": 3.375
 },
 {
   "label": "Cash",
   "hype": 4.375,
   "current": 2.75,
   "potential": 4.375
 },
 {
   "label": "Centre for humanitarian data",
   "hype": 3.75,
   "current": 2.375,
   "potential": 4.125
 },
 {
   "label": "Communities of Practice",
   "hype": 2.5,
   "current": 2.25,
   "potential": 3.25
 },
 {
   "label": "Crowdsourcing",
   "hype": 3,
   "current": 2.5,
   "potential": 3.25
 },
 {
   "label": "Data Literacy",
   "hype": 3,
   "current": 2.375,
   "potential": 4
 },
 {
   "label": "Data Protection and responsible data",
   "hype": 3.625,
   "current": 2.75,
   "potential": 4.375
 },
 {
   "label": "Data Science",
   "hype": 2.95,
   "current": 2.25,
   "potential": 3.375
 },
 {
   "label": "Data scrambles",
   "hype": 2.125,
   "current": 2.5,
   "potential": 3.125
 },
 {
   "label": "Data Standards",
   "hype": 2.625,
   "current": 2,
   "potential": 4.125
 },
 {
   "label": "Digital hubs",
   "hype": 2.875,
   "current": 2.125,
   "potential": 3
 },
 {
   "label": "Digital identity",
   "hype": 2.875,
   "current": 2,
   "potential": 3.375
 },
 {
   "label": "Digital volunteering",
   "hype": 2.75,
   "current": 2.5,
   "potential": 3.5
 },
 {
   "label": "Direct giving (Peer-to-peer)",
   "hype": 3.142857143,
   "current": 1.714285714,
   "potential": 3
 },
 {
   "label": "Evidence-based decision making",
   "hype": 3.125,
   "current": 2.375,
   "potential": 3.875
 },
 {
   "label": "Forecast Based Financing",
   "hype": 3.285714286,
   "current": 2.428571429,
   "potential": 3.857142857
 },
 {
   "label": "Human Centred Design/User Centred Design",
   "hype": 2.94,
   "current": 2,
   "potential": 3.75
 },
 {
   "label": "Info as a Service",
   "hype": 2.81,
   "current": 2,
   "potential": 3.625
 },
 {
   "label": "Information Management",
   "hype": 3.5,
   "current": 3,
   "potential": 4.125
 },
 {
   "label": "Just-in-time logistics",
   "hype": 2.333333333,
   "current": 2,
   "potential": 3.833333333
 },
 {
   "label": "Mixed Methods",
   "hype": 3,
   "current": 2.4,
   "potential": 3.6
 },
 {
   "label": "Open Data",
   "hype": 3.375,
   "current": 2.75,
   "potential": 4.125
 },
 {
   "label": "Open governance",
   "hype": 2.6,
   "current": 2.2,
   "potential": 3.6
 },
 {
   "label": "Open Humanitarianism",
   "hype": 1.857142857,
   "current": 1.571428571,
   "potential": 3.571428571
 },
 {
   "label": "Open source",
   "hype": 2.375,
   "current": 2.625,
   "potential": 4.125
 },
 {
   "label": "Qualitative vs quantitative data",
   "hype": 2.428571429,
   "current": 2.428571429,
   "potential": 4
 },
 {
   "label": "Randomised controlled trials",
   "hype": 2,
   "current": 2.142857143,
   "potential": 3.428571429
 },
 {
   "label": "Real Time Evaluation",
   "hype": 2.5,
   "current": 2,
   "potential": 3.875
 },
 {
   "label": "Resilience",
   "hype": 2.69,
   "current": 2.428571429,
   "potential": 3.714285714
 },
 {
   "label": "Social Media Analysis",
   "hype": 3.625,
   "current": 1.625,
   "potential": 2.375
 },
 {
   "label": "Sustainable Development Goals",
   "hype": 3.75,
   "current": 2.375,
   "potential": 3.375
 },
 {
   "label": "Taxonomies",
   "hype": 2.375,
   "current": 1.75,
   "potential": 3.5
 },
 {
   "label": "Traceability",
   "hype": 2.3,
   "current": 1.666666667,
   "potential": 3.333333333
 },
 {
   "label": "Transparency",
   "hype": 2.875,
   "current": 2.125,
   "potential": 3.625
 }
];  // Can add additional values and will scale

var colors = ['#a8ddb5','#7bccc4','#4eb3d3','#2b8cbe','#0868ac','#084081'];

    var colorMin = d3.min(data_scatter, function(d) {
                    return d.potential-d.current;  // get the input domain as first column of array
                    });

    var colorMax = d3.max(data_scatter, function(d) {
                    return d.potential-d.current;  // get the input domain as first column of array
                    });

            // Define Scales - scales map an input domain with an output range
            var xScale = d3.scale.linear()
                .domain([1.9,4.5])
                .range([padding, canvas_width - padding * 2]);

            var yScale = d3.scale.linear()
                .domain([1.8, 4.5])
                .range([canvas_height - padding, padding]);  // Make decimals round up nicely

            // Add circles from data
            svg.selectAll("circle")
                .data(data_scatter)
                .enter()
                .append("circle")
                .attr("r", function(d){return (d.potential-d.current)*3+1})  // Radius
                .attr("cx", function(d) {
                    return xScale(d.potential);  // Returns scaled circle x
                })
                .attr("cy", function(d) {
                    return yScale(d.hype);  // Returns scaled circle y
                })
                .attr("fill",function(d){
                    var value = Math.round(((d.potential-d.current)-colorMin)/(colorMax-colorMin)*5);
                    return colors[value]
                });

            // Add Text labels
            svg.selectAll("text")
                .data(data_scatter)
                .enter()
                .append("text")
                .text(function(d) {
                    return d.label;
                })
                .attr("x", function(d) {
                    return xScale(d.potential)+10;  // Returns scaled location of x
                })
                .attr("y", function(d) {
                    return yScale(d.hype)+4;  // Returns scaled circle y
                })
                .attr("font-size", "11px")  // Font size
                .attr("fill", "black");   // Font color

            svg
                .append("text")
                .text('Potential Impact on the Sector')
                .attr("x", 400)
                .attr("y", 590)
                .style("font-size", "18px")
                .attr("fill", "black");     

            svg
                .append("text")
                .text('Hype')
                .attr("x", -300)
                .attr("y", 20)
                .style("font-size", "18px")
                .attr("fill", "black")
                .attr("transform", function(d) {
                return "rotate(-90)" 
                });

            svg
                .append("text")
                .text('Low')
                .attr("x", -410)
                .attr("y", 430)
                .style("font-size", "18px")  // Font size
                .attr("fill", "black")
                .attr("transform", function(d) {
                return "rotate(-45)" 
                });

            svg
                .append("text")
                .text('High')
                .attr("x", 850)
                .attr("y", 590)
                .style("font-size", "18px")
                .attr("fill", "black");     

            svg
                .append("text")
                .text('High')
                .attr("x", -100)
                .attr("y", 20)
                .style("font-size", "18px")
                .attr("fill", "black")
                .attr("transform", function(d) {
                return "rotate(-90)" 
                });

            svg.append("circle")
              .attr("cx",950)
              .attr("cy",50)
              .attr("r",8)
              .attr("fill",'#084081');

            svg.append("circle")
              .attr("cx",950)
              .attr("cy",80)
              .attr("r",4)
              .attr("fill",'#4eb3d3');

            svg.append("circle")
              .attr("cx",950)
              .attr("cy",110)
              .attr("r",2)
              .attr("fill",'#a8ddb5');

            svg
                .append("text")
                .text('Legend')
                .attr("x", 940)
                .attr("y", 20)
                .style("font-size", "11px")
                .attr("fill", "black");     

            svg
                .append("text")
                .text('High growth needed to reach potential')
                .attr("x", 965)
                .attr("y", 53)
                .style("font-size", "11px")
                .attr("fill", "black");

            svg
                .append("text")
                .text('Medium growth needed to reach potential')
                .attr("x", 965)
                .attr("y", 83)
                .style("font-size", "11px")
                .attr("fill", "black");                                                 

            svg
                .append("text")
                .text('Low growth needed to reach potential')
                .attr("x", 965)
                .attr("y", 113)
                .style("font-size", "11px")
                .attr("fill", "black"); 
            // Define X axis and attach to graph
            var xAxis = d3.svg.axis()  // Create an x axis
                .scale(xScale)      // Scale x axis
                .orient("bottom")  // Put text on bottom of axis line
                .ticks(10);  // Set rough # of ticks (optional)

            svg.append("g")     // Append a group element (itself invisible, but helps 'group' elements)
                .attr("class", "axis")  // Assign the 'axis' CSS
                .attr("transform", "translate(0," + (canvas_height - padding) + ")")  // Place axis at bottom
                .call(xAxis);  // Call function to create axis

            // Define Y axis and attach to graph
            var yAxis = d3.svg.axis()  // Create a y axis
                .scale(yScale)  // Scale y axis
                .orient("left")
                .ticks(5);  // Set rough # of ticks (optional)

            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + padding + ",0)")
                .call(yAxis);
 
  </script>
  
  </body>
</html>